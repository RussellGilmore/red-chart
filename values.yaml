# Default values for red-chart
# This is a YAML-formatted file.

# -- Application name
app:
  name: red-app
  version: "1.0.0"

# -- Namespace configuration
namespace:
  # -- Kubernetes namespace name
  name: red-app
  # -- Create namespace if it doesn't exist
  create: true
  # -- Additional labels for namespace
  labels:
    istio-injection: enabled

# -- Container image configuration
image:
  # -- Image pull secrets for private registries
  imagePullSecrets: []
  # -- Image repository
  repository: nginxinc/nginx-unprivileged
  # -- Image tag
  tag: alpine3.21
  # -- Image pull policy
  pullPolicy: IfNotPresent

# -- Number of replicas
replicaCount: 1

# -- Resource requests and limits
resources:
  requests:
    memory: 64Mi
    cpu: 100m
  limits:
    memory: 128Mi
    cpu: 200m

# -- Container security context
containerSecurityContext:
  runAsNonRoot: true
  runAsUser: 101
  runAsGroup: 101
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
      - ALL
  seccompProfile:
    type: RuntimeDefault

# -- Pod security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 101
  runAsGroup: 101
  fsGroup: 101
  seccompProfile:
    type: RuntimeDefault

# -- Service configuration
service:
  # -- Service type
  type: ClusterIP
  # -- Service port
  port: 80
  # -- Target container port
  targetPort: 8080

# -- Domain configuration
domain:
  # -- Apex domain name
  apex: rag-space.com
  # -- Subdomain for application
  subdomain: red-app

# -- Istio Gateway configuration
gateway:
  # -- Gateway name
  name: red-app-gateway
  # -- Gateway namespace (typically istio-system)
  namespace: istio-system

# -- Certificate configuration
certificate:
  # -- Enable cert-manager certificate
  enabled: true
  # -- ClusterIssuer name
  issuer: letsencrypt-prod
  # -- Certificate duration
  duration: 2160h
  # -- Certificate renewal time
  renewBefore: 360h

# -- Traefik TCP Route configuration
tcpRoute:
  # -- Enable Traefik TCP route
  enabled: true
  # -- Traefik entry point
  entryPoint: websecure

# -- Content configuration
content:
  # -- HTML content for the application
  html: |
    <!DOCTYPE html>
    <html>
    <head>
      <title>Welcome to {{ .Values.app.name }}!</title>
      <style>
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
          max-width: 800px;
          margin: 0 auto;
          padding: 20px;
          line-height: 1.6;
        }
        h1 {
          color: #e74c3c;
        }
        .message {
          padding: 20px;
          background-color: #f8f9fa;
          border-left: 4px solid #e74c3c;
          margin-bottom: 20px;
        }
      </style>
    </head>
    <body>
      <h1>Welcome to {{ .Values.app.name }}!</h1>
      <div class="message">
        <p>This application is running in Kubernetes with Istio service mesh.</p>
      </div>
      <p>Deployed with Red Chart v{{ .Chart.Version }}</p>
    </body>
    </html>

# -- Health probe configuration
livenessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 10
  periodSeconds: 30
  timeoutSeconds: 5
  failureThreshold: 3

# -- Readiness probe configuration
readinessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10
  timeoutSeconds: 3
  failureThreshold: 3

# -- Pod annotations
podAnnotations: {}

# -- Pod labels
podLabels: {}

# -- Node selector
nodeSelector: {}

# -- Tolerations
tolerations: []

# -- Affinity rules
affinity: {}
